// AUTOGENERATED! DO NOT EDIT.

package pizzeria

import (
	"tonky/holistic/infra"
	"tonky/holistic/infra/logger"

	"github.com/samber/do/v2"
)

type App struct {
	deps       do.Injector
	logger     *logger.SlogLogger

    ordererRepo OrdererRepository
}

func NewApp(deps do.Injector) (*App, error) {
    postgresConf := do.MustInvoke[*infra.PostgresConfig](deps)

    postgresClient, err := infra.NewPostgresClient(*postgresConf)
	if err != nil {
        return nil, err
    }

	return &App{
		deps:       deps,
		logger:     do.MustInvoke[*logger.SlogLogger](deps),
        ordererRepo: PostgresOrderer{
            client: postgresClient,
        },
	}, nil
}
